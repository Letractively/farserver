<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
					   xmlns:s="library://ns.adobe.com/flex/spark" 
					   xmlns:mx="library://ns.adobe.com/flex/mx" 
					   width="1024" height="768" xmlns:com="com.*" initialize="windowedapplication2_initializeHandler(event)">
	<fx:Script>
		<![CDATA[
			import com.SlideBackEvent;
			import com.greensock.TweenLite;
			import com.greensock.easing.Circ;
			import com.orc.service.DataCollection;
			import com.orc.service.ServiceRegistry;
			import com.orc.utils.FormatUtils;
			import com.orc.utils.TimeRelatedId;
			
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.events.FlexEvent;

			public static const serviceRegistry:ServiceRegistry = new ServiceRegistry();
			
			
			protected function hideDashboard() :void {
				TweenLite.to(p_files, 0.5, {x:-400, y:-400, ease:Circ.easeInOut});
				TweenLite.to(p_proc, 0.5, {x:333, y:-400, ease:Circ.easeInOut});
				TweenLite.to(p_webclic, 0.5, {x:1315, y:-400, ease:Circ.easeInOut});
				
				TweenLite.to(p_notes, 0.5, {x:-400, y:800, ease:Circ.easeInOut});
				TweenLite.to(p_config, 0.5, {x:-403, y:800, ease:Circ.easeInOut});
				TweenLite.to(p_task, 0.5, {x:-1050, y:800, ease:Circ.easeInOut});
			}
			
			protected function showDashboard() :void {
				TweenLite.to(p_files, 0.5, {x:10, y:10, ease:Circ.easeInOut});
				TweenLite.to(p_proc, 0.5, {x:333, y:10, ease:Circ.easeInOut});
				TweenLite.to(p_webclic, 0.5, {x:755, y:10, ease:Circ.easeInOut});
				
				TweenLite.to(p_notes, 0.5, {x:10, y:340, ease:Circ.easeInOut});
				TweenLite.to(p_config, 0.5, {x:403, y:340, ease:Circ.easeInOut});
				TweenLite.to(p_task, 0.5, {x:755, y:340, ease:Circ.easeInOut});
			}
			
			protected function button1_clickHandler(event:MouseEvent):void
			{
				hideDashboard();								
				TweenLite.to(notes_g, 0.5, {scaleX:1, scaleY:1, alpha:1});
			}
			

			protected function windowedapplication2_initializeHandler(event:FlexEvent):void
			{
				notes_g.addEventListener(SlideBackEvent.BACK, onSlideBack);
			}


			protected function onSlideBack(event:Event):void
			{
				if (event is SlideBackEvent) {
					showDashboard();
					TweenLite.to((event as SlideBackEvent).obj, 0.5, {alpha:0,scaleX:1.3, scaleY:1.3, ease:Circ.easeOut});
					//TweenLite.to(notes_g, 2, {visible:false, alpha:0});
				}
			}


			protected function switch2File(event:MouseEvent):void
			{
				hideDashboard();		
				TweenLite.to(files_g, 0.5, {scaleX:1, scaleY:1, alpha:1});
			}

		]]>
	</fx:Script>
		<fx:Style>
			@namespace s "library://ns.adobe.com/flex/spark";
			@namespace mx "library://ns.adobe.com/flex/mx";
			>RichTextEditor { cornerRadius: 10; }
		</fx:Style>
	<fx:Declarations>
	</fx:Declarations>
	
	<s:Group>
	
		<s:Panel id="p_files" x="10" y="10"  width="315" height="314" title="最近文件">
			<s:Button x="260" y="-25" width="44" label="按钮" click="switch2File(event)"/>
			<s:List x="10" y="10" width="292" height="262" labelField="name" dataProvider="{serviceRegistry.fileService.getUsefullFileList()}"></s:List>
		</s:Panel>
		
		
		<s:Panel id="p_proc" x="333" y="10"  width="410" height="314" title="工作进度">
			<s:Button x="367" y="-25" width="35" label="按钮" click="button1_clickHandler(event)"/>
		</s:Panel>
		<s:Panel id="p_webclic" x="755" y="10" width="259" height="313" title="Web剪辑">
		</s:Panel>
		<s:Panel id="p_notes" x="10" y="344" width="384" height="406" title="文档记事">
			<s:List x="10" y="10" width="292" height="262" labelField="title" dataProvider="{new ArrayCollection(serviceRegistry.notesService.getNotesList())}"></s:List>
		</s:Panel>
		<s:Panel id="p_config" x="403" y="340" width="341" height="410">
		</s:Panel>
		<s:Panel id="p_task" x="755" y="340" width="259" height="410" title="定期任务">
		</s:Panel>
		
		<com:notesvg id="notes_g" alpha="0" y="0" scaleX="1.3" scaleY="1.3">
		</com:notesvg>	
		
		<com:filesvg id="files_g" x="-131" y="0" alpha="0" scaleX="1.3" scaleY="1.3">
		</com:filesvg>
	</s:Group>
</s:WindowedApplication>
